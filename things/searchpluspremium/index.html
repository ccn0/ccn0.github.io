<!DOCTYPE html>
<html lang="en">
<!-- made by ccn0 | v1.6.11 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SearchPlusPREMIUM</title>
    <link rel="icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
    <meta name="theme-color" content="#008000" data-react-helmet="true">
    <link rel="canonical" href="https://ccn0.net/things/searchpluspremium/">
    <meta name="og:title" content="SearchPlusPREMIUM">
    <meta property="og:description" content="The only search engine that brings you exactly where you wanna go.">
    <meta property="og:url" content="https://ccn0.net/things/searchpluspremium/index.html">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://ccn0.net/things/searchpluspremium/spp.png">
    <meta name="creator" content="CCN0">
    <meta name="description" content="The only search engine that brings you exactly where you wanna go.">
    <link rel="search" type="application/opensearchdescription+xml" title="SearchPlusPREMIUM" href="/things/searchpluspremium/opensearch.xml">
    <script defer="true">
    function randomInteger(min, max) {
        const rmin = min;
        const rmax = max;
        const targetNumber = Math.floor(Math.random() * (rmax - rmin + 1)) + rmin;
        return targetNumber;
    };
    function seed(leng = 0) {
        let digits = "";
        const HX = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_";
        for (let i = 0; i < leng; i++) {
            digits += String(HX[randomInteger(0,HX.length-1)]);
        };
        return digits;
    };
    const defaultData = {
        darkTheme: false,
        autofocusNew: false,
        useEnginesParamAllowed: true,
        magicword: seed(16),
        searchEngines: [
            {
                url: "https://www.google.com/search?q=%s",
                symbol: "@g",
            },
            {
                url: "https://duckduckgo.com/?q=%s",
                symbol: "@ddg",
            },
            {
                url: "https://ccn0.net/things/searchpluspremium/index.html",
                symbol: "!",
            },
        ],
    };
    const litDefData = {
        darkTheme: "Dark Theme",
        autofocusNew: "Autofocus New",
        useEnginesParamAllowed: "?useEngines Param Enabled",
        magicword: "Magic Word",
        searchEngines: "Engines",
    }
    let settings = JSON.parse(localStorage.getItem("spp_settings")) || {};
    for (const key in defaultData) {
        if (!(key in settings)) {
            settings[key] = defaultData[key];
        };
    };
    localStorage.setItem("spp_settings", JSON.stringify(settings));
    const gbal = {
        settings: JSON.parse(
            localStorage.getItem("spp_settings") || defaultData
        ),
        save: function () {
            localStorage.setItem("spp_settings", JSON.stringify(gbal.settings));
        },
        thelist: [
            {
                "name": "Google",
                "url": "https://www.google.com/search?q=%s",
                "nicks": [
                    "google.com", "israel is committing a genocide in gaza", "goo", "goog", "goggle", "gog", "gle", "googl", "g"
                ]
            },
            {
                "name": "DuckDuckGo",
                "url": "https://duckduckgo.com/?q=%s",
                "nicks": [
                    "duckduckgo.com", "duc", "duck", "ddg", "d"
                ]
            },
            {
                "name": "StartPage",
                "url": "https://www.startpage.com/do/dsearch?query=%s",
                "nicks": [
                    "startpage.com", "start", "sp", "sx"
                ]
            },
            {
                "name": "Bing",
                "url": "https://www.bing.com/search?q=%s",
                "nicks": [
                    "bing.com", "bng", "b"
                ]
            },
            {
                "name": "Wikipedia",
                "url": "https://en.wikipedia.org/wiki/Special:Search?search=%s",
                "nicks": [
                    "wikipedia.org", "english wikipedia", "wikipedia (en)", "wiki", "wikip", "wp", "enwiki", "w"
                ]
            },
            {
                "name": "Yahoo",
                "url": "https://search.yahoo.com/search?p=%s",
                "nicks": [
                    "yahoo.com", "ya", "y", "yah"
                ]
            },
            {
                "name": "Ecosia",
                "url": "https://www.ecosia.org/search?q=%s",
                "nicks": [
                    "ecosia.org", "ecos", "eco", "e"
                ]
            },
            {
                "name": "YouTube",
                "url": "https://www.youtube.com/results?search_query=%s",
                "nicks": [
                    "youtube.com", "utube", "you tube", "ut", "yotube", "yt"
                ]
            },
            {
                "name": "Reddit",
                "url": "https://www.reddit.com/search/?q=%s",
                "nicks": [
                    "reddit.com", "red", "re", "redd", "ut", "redit", "r"
                ]
            },
            {
                "name": "Twitter",
                "url": "https://x.com/search?q=%s",
                "nicks": [
                    "twitter.com", "shell company", "botland", "twiter", "tw", "x.com", "twtter", "x"
                ]
            },
            {
                "name": "IMDb",
                "url": "https://www.imdb.com/find?q=%s",
                "nicks": [
                    "imdb.com", "i"
                ]
            },
            {
                "name": "StackOverflow",
                "url": "https://stackoverflow.com/search?q=%s",
                "nicks": [
                    "stackoverflow.com", "stack overflow", "stacko", "so"
                ]
            },
            {
                "name": "Urban Dictionary",
                "url": "https://www.urbandictionary.com/define.php?term=%s",
                "nicks": [
                    "urbandictionary.com", "udef", "urb", "udict", "ud"
                ]
            },
            {
                "name": "Farside",
                "url": "https://farside.link/%u",
                "nicks": [
                    "far side", "farside.link", "fars", "frside", "fs"
                ]
            },
            {
                "name": "Genius",
                "url": "https://genius.com/search?q=%s",
                "nicks": [
                    "genius.com", "geniis", "genus", "geni", "ge", "gen"
                ]
            },
            {
                "name": "ChatGPT",
                "url": "https://chatgpt.com/?q=%s",
                "nicks": [
                    "water waster", "chatgpt.com", "chat.openai.com", "chat", "gpt"
                ]
            },
            {
                "name": "Pinterest",
                "url": "https://www.pinterest.com/search/pins/?q=%s",
                "nicks": [
                    "pinterest.com", "pni", "pintrest", "pin", "p"
                ]
            },
            {
                "name": "Tumblr",
                "url": "https://www.tumblr.com/search/%s",
                "nicks": [
                    "tumblr.com", "tumbl", "tum"
                ]
            },
            {
                "name": "GitHub",
                "url": "https://github.com/search?q=%s",
                "nicks": [
                    "github.com", "not gitlab", "git hub", "gith", "gh"
                ]
            },
            {
                "name": "MDN Web Docs",
                "url": "https://developer.mozilla.org/en-US/search?q=%s",
                "nicks": [
                    "developer.mozilla.org", "mozilla web docs", "mdn docs", "ndn", "mdm", "mdn"
                ]
            },
            {
                "name": "SearchPlusPREMIUM",
                "url": `${location.protocol+"//"+location.hostname+(location.port ? ":"+location.port: "")+location.pathname}`,
                "nicks": [
                    "this", "here", "spp", "s+p", "!"
                ]
            },
            {
                "name": "Go To",
                "url": "%u",
                "nicks": [
                    "url", "goto"
                ]
            }
        ],
    };
    </script>
    <script deref="true">
    gbal.ui = {
        checkbox: (params = {
            id: "unk",
            label: "Label",
            title: "",
            boxtitle: "",
            value: false,
        })=>{
            const uiCont = document.createElement("div");
            uiCont.classList.add("uicont");

            const label = document.createElement("label");
            label.textContent = params.label;
            label.title = params.title;
            label.htmlFor = params.id;

            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.checked = params.value;
            checkbox.title = params.boxtitle;
            checkbox.id = params.id;
            if (params.changeevent) checkbox.addEventListener("change",params.changeevent)

            uiCont.appendChild(label);
            uiCont.appendChild(checkbox);
            return uiCont;
        },
        iText: (params = {
            id: "unkinp",
            label: "Label",
            title: "",
            boxtitle: "",
            value: "",
        })=>{
            const uiCont = document.createElement("div");
            uiCont.classList.add("uicont");

            const label = document.createElement("label");
            label.textContent = params.label;
            label.title = params.title;
            label.htmlFor = params.id;

            const input = document.createElement("input");
            input.type = "text";
            input.title = params.boxtitle;
            input.value = params.value;
            input.id = params.id;
            if (params.changeevent) input.addEventListener("change",params.changeevent)

            uiCont.appendChild(label);
            uiCont.appendChild(input);
            return uiCont;
        },
        modal: (params = {
            id: "unkmod",
            title: "Modal",
            txt: [],
            headActions: [],
            mainActions: []
        })=>{
            const modalCont = document.createElement("div");
            modalCont.classList.add("modal");
            modalCont.role = "dialog";
            modalCont.ariaModal = true;
            modalCont.id = params.id;

            const modheader = document.createElement("div");
            modheader.classList.add("modheader");

            const mdheadH2 = document.createElement("h2");
            mdheadH2.textContent = params.title;
            modheader.appendChild(mdheadH2);

            function createModBtn(button = {
                text: "",
                title: "",
                label: "",
                classes: [],
                action: ()=>{},
            }) {
                const btn = document.createElement("button");
                btn.textContent = button.text;
                btn.title = button.title;
                if (button.label) btn.ariaLabel = button.label;
                if (button.classes?.length > 0) btn.classList.add(...button.classes);
                btn.addEventListener("click",button.action);

                modheader.appendChild(btn);
            };
            if (params.headActions?.length > 0) params.headActions.forEach(btn=>createModBtn(btn));

            modalCont.appendChild(modheader);

            const modMain = document.createElement("div");
            modMain.classList.add("modmain");

            const txtDiv = document.createElement("div");
            txtDiv.classList.add("txt");
            if (params.txt?.length > 0) params.txt.forEach(el=>txtDiv.appendChild(el));
            modMain.appendChild(txtDiv);

            const mainActionCont = document.createElement("div");
            mainActionCont.classList.add("actions");
            
            function createMainBtn(button) {
                const btn = document.createElement("button");
                btn.textContent = button.text;
                btn.title = button.title;
                if (button.classes?.length > 0) btn.classList.add(...button.classes);
                btn.addEventListener("click",button.action);

                mainActionCont.appendChild(btn);
            };
            if (params.mainActions?.length > 0) params.mainActions.forEach(btn=>createMainBtn(btn));

            modMain.appendChild(mainActionCont);
            modalCont.appendChild(modMain);

            return modalCont;
        }
    };
    </script>
</head>
<body data-darktheme="false">
    <noscript>
        <div class="warnbanner">
            SearchPlusPREMIUM requires javascript to function!!!!!
        </div>
    </noscript>
    <div class="content">
        <div class="col c1" id="topcol">
            <div class="elem">
                <figure>
                    <img src="logo.png" alt="SearchPlusPREMIUM Logo">
                    <figcaption>
                        the only search engine that gets you
                        <em>exactly</em> where you want to go
                    </figcaption>
                </figure>
                <form action="search.html">
                    <input type="search"
                    placeholder="search here"
                    name="q" id="q"
                    title="Search Here"
                    aria-label="Search Query here"
                    autofocus
                    required>
                    <input type="submit" value="TAKE ME" title="Submit query" aria-label="Submit query and go">
                </form>
                <div style="text-align: center; padding: 10px 0;">
                    <a href="https://bsky.app/profile/ccn0.net">made by ccn0</a>
                    <a href="#settcol">engines</a>
                    <a href="#settcol" class="skipnav">skip to engines</a>
                </div>
            </div>
        </div>
        <div class="col c3" id="textcol">
            <div>
                <details>
                    <summary>About:</summary>
                    <p>Instead of relying on your browsers search "keywords,"
you can instead use SearchPlusPREMIUM, which despite the name sounding like otherwise, is actually free.
You can add it as a search engine by using the URL,
<code>https://ccn0.net/things/searchpluspremium/search.html?q=%s</code>,
or if your using Firefox, click on the search bar while on this page and click the little icon with the green plus.
                    </p>
                    <p>
                        SHARE EVERYWHERE!!!
                        <a target="_blank" href="https://twitter.com/intent/tweet?text=BEST%20SEARCH%20ENGINE%20EVER,%20USE%20SearchPlusPREMIUM%20NOW%20https://ccn0.net/things/searchpluspremium/index.html">Share&nbsp;to&nbsp;Twitter</a>
                        <a href="https://www.reddit.com/submit?url=https://ccn0.net/things/searchpluspremium/index.html&title=BEST%20SEARCH%20ENGINE%20EVER,%20USE%20SearchPlusPREMIUM%20NOW" target="_blank">Share&nbsp;on&nbsp;Reddit</a>
                        <a href="mailto:?subject=BEST%20SEARCH%20ENGINE%20EVER,%20USE%20SearchPlusPREMIUM%20NOW&body=Check%20this%20out%20https://ccn0.net/things/searchpluspremium/index.html" target="_blank">Share&nbsp;via&nbsp;Email</a>
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ccn0.net/things/searchpluspremium/index.html&title=BEST%20SEARCH%20ENGINE%20EVER%2C%20USE%20SearchPlusPREMIUM%20NOW" target="_blank">Share&nbsp;on&nbsp;LinkedIn</a>
                        <a href="https://www.tumblr.com/share/link?url=https://ccn0.net/things/searchpluspremium/index.html&name=BEST%20SEARCH%20ENGINE%20EVER,%20USE%20SearchPlusPREMIUM%20NOW" target="_blank">Share&nbsp;on&nbsp;Tumblr</a>
                        <a href="javascript:navigator.clipboard.writeText('https://ccn0.net/things/searchpluspremium/index.html');">Copy&nbsp;Link</a>
                    </p>
                </details>
                <details>
                    <summary>
                        Read tutorial:
                    </summary>
                    <ul>
                        <li>Type the name of a search engine into the Quick Add bar and hit enter.</li>
                        <span style="font-weight: bold;">OR</span>
                        <li>
                            Click <span class="fakebutton">Add New</span>
                        </li>
                        <li>
                            Add a URL, with %s in the place of the query, e.g. <code>https://www.google.com/search?q=%s</code>
                        </li>
                        <li>
                            Add a Symbol, which you use to specify engine, e.g. searching <code>@ddg hello world</code> will use DuckDuckGo
                        </li>
                        <li>
                            The default search engine will be the one at the top. Variables can be used any amount of times.
                        </li>
                        <a href="#detailsvar" onclick="document.querySelector('#detailsvar').open = true">More Variables</a>
                    </ul>
                </details>
                <details id="extrasDetails">
                    <summary>
                        Settings:
                    </summary>
                    <p>
                        <a href="#" id="resetButton" title="Reset all settings to defaults">RESET&nbsp;ALL&nbsp;SETTINGS</a>
                        <div id="livesettings"></div>
                        <script defer="true">
    const extraContainer = document.querySelector("#extrasDetails");
    const setCont = document.querySelector("#livesettings");
    extraContainer.addEventListener('toggle',(e)=>{
        setCont.innerHTML = "";
        if (e.target.open == true) {
            setCont.appendChild(gbal.ui.checkbox({
                label:"Dark Theme",
                title:"Toggle dark mode",
                boxtitle:"Dark mode",
                id:"darktheme",
                value:gbal.settings.darkTheme,
                changeevent:(e)=>{
                    gbal.settings.darkTheme = e.target.checked;
                    gbal.save();
                    document.body.dataset.darktheme = gbal.settings.darkTheme;
                }
            }));
            setCont.appendChild(gbal.ui.checkbox({
                label:"Autofocus New Engines",
                title:"Autofocus URL Input for new engines",
                boxtitle:"Autofocus New Engines",
                id:"autofocusnew",
                value:gbal.settings.autofocusNew,
                changeevent:(e)=>{
                    gbal.settings.autofocusNew = e.target.checked;
                    gbal.save();
                }
            }));
            setCont.appendChild(gbal.ui.checkbox({
                label:"useEngines Parameter Enabled",
                title:"useEngines parameter to use external engines without adding them",
                boxtitle:"useEngines Parameter Enabled",
                id:"useenginesparamallowed",
                value:gbal.settings.useEnginesParamAllowed,
                changeevent:(e)=>{
                    gbal.settings.useEnginesParamAllowed = e.target.checked;
                    gbal.save();
                }
            }));
            setCont.appendChild(gbal.ui.iText({
                label:"Magic Word",
                title:"Set Magic Word to verify useEngines parameter",
                boxtitle:"Magic Word",
                id:"magicword",
                value:gbal.settings.magicword,
                changeevent:(e)=>{
                    gbal.settings.magicword = e.target.value;
                    gbal.save();
                }
            }));
        };
    });

    document.querySelector("#resetButton").addEventListener("click",()=>{
        if (confirm("Are you absolutely sure you want to reset your settings back to their defaults?")) {
            localStorage.setItem(
                "spp_settings",
                JSON.stringify(defaultData)
            );
            location.reload();
        };
    });
                        </script>
                    </p>
                </details>
                <p>THANK YOU TO:
                    <ul>
                        <li title="Search">Google for <a href="https://fonts.google.com/specimen/Open+Sans"><em>Open Sans</em></a></li>
                        <li title="PLUS">Paul D. Hunt for <a href="https://fonts.google.com/specimen/Source+Sans+3"><em title="when did they rename source sans pro???">Source Sans 3</em></a></li>
                        <li title="premium">Robert Leuschke for <a href="https://fonts.google.com/specimen/Mea+Culpa"><em>Mea Culpa</em></a></li>
                        <li title="for now...">ALL CODE IS OWNED BY <a href="https://github.com/ccn0">CCN0</a>, ALL RIGHTS RESERVED</li>
                    </ul>
                </p>
                <p>If you like this search engine, be sure to give it a like. If you find a problem, or want me to add an engine to Quick Add,
                    <a href="https://github.com/ccn0/ccn0.github.io/issues">open an issue on the website repo</a>.
                </p>
                <details id="detailsvar">
                    <summary>Variables</summary>
                    <ul>
                        <li>
                            <code>%s</code>: Your search query with URI encoding
                        </li>
                        <li>
                            <code>%u</code>: Your unencoded search query
                        </li>
                        <li>
                            <code>%p</code>: Your engine's symbol
                        </li>
                        <li>
                            <code>%yr</code>: Last two digits of the current year
                        </li>
                        <li>
                            <code>%year</code>: Full current year
                        </li>
                        <li>
                            <code>%mo</code>: Current month (zero-padded)
                        </li>
                        <li>
                            <code>%dy</code>: Current day of the month (zero-padded)
                        </li>
                        <li>
                            <code>%hr</code>: Current hour (zero-padded, 24-hour format)
                        </li>
                        <li>
                            <code>%min</code>: Current minute (zero-padded)
                        </li>
                        <li>
                            <code>%ms</code>: Current millisecond (zero-padded, three digits)
                        </li>
                        <li>
                            <code>%dow</code>: Day of the week
                        </li>
                        <li>
                            <code>%dwn</code>: Day of the week as number (1 = Monday)
                        </li>
                        <li>
                            <code>%ts</code>: Timestamp
                        </li>
                    </ul>
                </details>
            </div> 
        </div>
        <div class="col c2" id="settcol">
            <div style="padding: 15px;">
                <h1>Engines</h1>
            </div>
            <div class="containercontaineryupyup">
                <div class="container">
                    <div id="enginelist" class="list" role="list" aria-label="Engine List"></div>
                    <div class="toolbar" role="toolbar" aria-label="Adding Engines Toolbar">
                        <div class="oh">
                            <button onclick="addNew()" title="Add New Search Engine">Add New</button>
                        </div>
                        <div class="oh">
                            <input type="text" aria-label="Quick Add Search Engines" title="Quick Add Search Engine" placeholder="Quick Add" id="qainput">
                        </div>
                    </div>
                    <div class="toolbar topborder" role="toolbar" aria-label="Import/Export Engines Toolbar">
                        <div class="oh">
                            <button onclick="importDialog()" title="Import Search Engines from JSON">Import...</button>
                        </div>
                        <div class="oh">
                            <button onclick="exportDialog()" title="Export Search Engines as JSON">Export...</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const params = new URLSearchParams(window.location.search);
        const query = params.get("q");
        if (query != null) {
            document.querySelector("#q").value = query;
        };
    </script>
    <script defer="true">
    function QA(e,qainput) {
        if (e.key == "Enter") {
            gbal.thelist.forEach((engine)=>{
                if ((engine.nicks.includes(qainput.value.toLowerCase()) || 
                    qainput.value.toLowerCase() == engine.name.toLowerCase())) {
                    gbal.settings.searchEngines.push({
                        "url":engine.url,
                        "symbol":engine.nicks[engine.nicks.length-1]
                    });
                    gbal.save();
                    loadEngines({moved: gbal.settings.searchEngines.length-1});
                    const engineList = document.querySelector("#enginelist");
                    engineList.scrollTo({ top: engineList.scrollHeight, behavior: "smooth" });
                    return;
                };
            });
        };
    };
    const qainputtop = document.querySelector("#qainput");
    qainputtop.addEventListener("keydown",e=>QA(e,qainputtop));
    </script>
    <script defer="true">
    const maincont = document.querySelector("#enginelist");

    function loadEngines(dat = {}) {
        maincont.innerHTML = "";

        let idx = 0;
        gbal.settings.searchEngines.forEach(engine => {
            const index = idx;
            dat = dat;

            const itemCont = document.createElement("div");
            itemCont.role = "listitem";
            itemCont.classList.add("engContainer");
            itemCont.dataset.engine = index;
            if (index == dat.moved) {
                itemCont.classList.add("moved");
            };

            const toolsCont = document.createElement("div");
            toolsCont.classList.add("engToolbar");

            const tbUp = document.createElement("button");
            tbUp.classList.add("engButton");
            tbUp.style.cssText = "border-right:2px solid var(--hero);";
            tbUp.title = "Move Engine Up";
            tbUp.ariaLabel = "Move engine up";
            tbUp.textContent = "⇑";
            tbUp.addEventListener("click", () => {
                function moveItemUp(arr, i) {
                    if (i <= 0) return arr;
                    [arr[i], arr[i - 1]] = [arr[i - 1], arr[i]];
                    return arr;
                };
                gbal.settings.searchEngines = moveItemUp(gbal.settings.searchEngines,index)
                gbal.save();
                loadEngines({moved:index-1});
            });

            const tbDown = document.createElement("button");
            tbDown.classList.add("engButton");
            tbDown.style.cssText = "border-right:2px solid var(--hero);";
            tbDown.title = "Move Engine Down";
            tbDown.ariaLabel = "Move engine down";
            tbDown.textContent = "⇓";
            tbDown.addEventListener("click", () => {
                function moveItemDown(arr, i) {
                    if (i >= arr.length - 1) return arr;
                    [arr[i], arr[i + 1]] = [arr[i + 1], arr[i]];
                    return arr;
                };

                gbal.settings.searchEngines = moveItemDown(gbal.settings.searchEngines,index)
                gbal.save();
                loadEngines({moved:index+1});
            });

            const tbDelete = document.createElement("button");
            tbDelete.classList.add("engButton","impButton");
            tbDelete.style.cssText = "border-right:2px solid var(--hero);";
            tbDelete.title = "Delete Search Engine";
            tbDelete.ariaLabel = "Delete search engine";
            tbDelete.textContent = "X";
            tbDelete.addEventListener("click", () => {
                gbal.settings.searchEngines = gbal.settings.searchEngines.filter(engin => engin !== gbal.settings.searchEngines[index]);
                gbal.save();
                loadEngines();
            });

            const tbUpCont = document.createElement("div");
            tbUpCont.classList.add("engBtnCont");
            tbUpCont.appendChild(tbUp);
            const tbXCont = document.createElement("div");
            tbXCont.classList.add("engBtnCont");
            tbXCont.appendChild(tbDelete);
            const tbDoCont = document.createElement("div");
            tbDoCont.classList.add("engBtnCont");
            tbDoCont.appendChild(tbDown);

            toolsCont.appendChild(tbUpCont);
            toolsCont.appendChild(tbXCont);
            toolsCont.appendChild(tbDoCont);

            itemCont.appendChild(toolsCont);

            const inputsCont = document.createElement("div");
            inputsCont.classList.add("engList")

            const urlinput = document.createElement("input");
            const symbput = document.createElement("input");

            urlinput.classList.add("engInput");
            urlinput.style.cssText = "border-bottom:1px solid var(--hero);";
            urlinput.title = "URL, %s is query";
            urlinput.placeholder = "URL where %s is the query";
            urlinput.value = engine.url;
            urlinput.addEventListener("change", (e) => {
                gbal.settings.searchEngines[index].url = e.target.value;
                gbal.save();
            });
            urlinput.addEventListener("keydown",(e)=>{
                if (e.key == "Enter") {
                    e.preventDefault();
                    symbput.focus();
                };
            });

            symbput.classList.add("engInput");
            symbput.style.cssText = "border-top:1px solid var(--hero);";
            symbput.title = "Symbol, specifies engine";
            symbput.placeholder = "Symbol, e.g '<symbol> query'";
            symbput.value = engine.symbol;
            if (symbput.value.length == 0 && urlinput.value.length > 0) {
                symbput.classList.add("wrong");
            } else {
                symbput.classList.remove("wrong");
            };
            symbput.addEventListener("change", (e) => {
                if (symbput.value.length == 0 && urlinput.value.length > 0) {
                    symbput.classList.add("wrong");
                } else {
                    symbput.classList.remove("wrong");
                };
                symbput.value = symbput.value.replace(/\s/g,"_");
                gbal.settings.searchEngines[index].symbol = e.target.value.replace(/\s/g,"_");
                gbal.save();
            });

            inputsCont.appendChild(urlinput);
            inputsCont.appendChild(symbput);

            itemCont.appendChild(inputsCont);
            maincont.appendChild(itemCont);
            if (index == dat.moved && gbal.settings.autofocusNew && dat.brandNew) {
                urlinput.focus();
            };
            idx++;
        });

        const newCont = document.createElement("div");
        newCont.classList.add("engContainer");
        newCont.style.cssText = "height:40px;";

        const newBtn = document.createElement("button");
        newBtn.title = "Add New Search Engine";
        newBtn.textContent = "Add New";
        newBtn.addEventListener("click",addNew);

        newCont.appendChild(newBtn);

        const qabCont = document.createElement("div");
        qabCont.classList.add("engContainer");
        qabCont.style.cssText = "height:40px;border-width:1px;";

        const qabInput = document.createElement("input");
        qabInput.ariaLabel = "Quick Add Bar";
        qabInput.title = "Quick Add Search Engine";
        qabInput.placeholder = "Quick Add";
        qabInput.classList.add("qab");
        qabInput.addEventListener("keydown",e=>QA(e,qabInput));

        qabCont.appendChild(qabInput);

        if (gbal.settings.searchEngines.length == 600) {
            maincont.appendChild(newCont);
            maincont.appendChild(qabCont);
        };
    };

    function addNew() {
        const brandNew = {
            url: "",
            symbol: ""
        };
        gbal.settings.searchEngines.push(brandNew);
        loadEngines({moved: gbal.settings.searchEngines.length-1, brandNew: true});
        const engineList = document.querySelector("#enginelist");
        engineList.scrollTo({ top: engineList.scrollHeight, behavior: "smooth" });
    };
    loadEngines();

    function importDialog() {
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = 'application/json';

        fileInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        importDialogX(e.target.result);
                    } catch (error) {
                        alert("This is not valid JSON.");
                        console.error(error);
                    };
                };
                reader.readAsText(file);
            };
        });

        fileInput.click();
        
        function importDialogX(result) {
            let importModal;
            const resultObj = JSON.parse(result);
            const toSave = {...resultObj}

            const settingsTable = document.createElement("table");
            settingsTable.id = "importsettings";
            const scaption = document.createElement("caption");
            scaption.textContent = "Settings";
            const stableHead = document.createElement("thead");
            const stheadTr = document.createElement("tr");

            function screateTH(elems) {
                const th = document.createElement("th");
                th.scope = "col";
                th.appendChild(elems);
                stheadTr.appendChild(th);
                return th;
            };

            const stoggleAll = document.createElement("input");
            stoggleAll.type = "checkbox";
            stoggleAll.checked = true;
            stoggleAll.title = "Toggle All Settings";
            stoggleAll.addEventListener("change", e => {
                const checked = e.target.checked;
                const checkboxes = stableBody.querySelectorAll("#importsettings tbody tr td input[type='checkbox']");

                checkboxes.forEach(box => {
                    box.checked = checked;
                    const key = box.dataset.key;
                    if (checked) {
                        toSave[key] = resultObj[key];
                    } else {
                        delete toSave[key];
                    }
                });

                console.log(toSave);
            });
            screateTH(stoggleAll);
            screateTH(document.createTextNode("Setting"));
            screateTH(document.createTextNode("Value"));

            stableHead.appendChild(stheadTr);
            settingsTable.appendChild(stableHead);

            const stableBody = document.createElement("tbody");
            Object.keys(resultObj).forEach(key=>{
                const dispName = litDefData[key] || `${key} (invalid setting)`;
                let dispVal = resultObj[key];
                let checked = !dispName.includes("invalid setting");
                if (typeof dispVal == "string") dispVal = `"${dispVal}"`;
                if (typeof dispVal == "number") dispVal = `${dispVal}`;
                if (typeof dispVal == "boolean") dispVal = `${dispVal}`;
                if (typeof dispVal == "array") dispVal = `[${dispVal}]`;
                if (key == "searchEngines") {
                    return;
                } else {
                    screateRow(key, dispName, dispVal, checked);
                };
            });

            function screateRow(ogKey, name, val, checked) {
                const tr = document.createElement("tr");
                const toggleSetting = document.createElement("input");
                toggleSetting.type = "checkbox";
                toggleSetting.checked = checked ?? true;
                toggleSetting.dataset.key = ogKey;
                toggleSetting.title = `Toggle ${name}`;

                toggleSetting.addEventListener("change", e => {
                    if (e.target.checked) {
                        toSave[ogKey] = resultObj[ogKey];
                    } else {
                        delete toSave[ogKey];
                    };
                    if (toSave == resultObj) {
                        stoggleAll.checked = true;
                    } else {
                        stoggleAll.checked = false;
                    };
                    console.log(toSave);
                });

                createTD(toggleSetting);
                createTD(document.createTextNode(name));
                if (typeof val == "string") createTD(document.createTextNode(val));
                if (typeof val == "object") createTD(val);

                function createTD(elem) {
                    const td = document.createElement("td");
                    td.appendChild(elem);
                    tr.appendChild(td);
                    return td;
                }

                stableBody.appendChild(tr);
                return toggleSetting;
            };

            settingsTable.appendChild(stableBody);

            // ENGINES TABLE BELOW!!!
            const toSaveEngines = [...resultObj.searchEngines];
            delete toSave.searchEngines;

            const enginesTable = document.createElement("table");
            enginesTable.id = "importengines";
            const ecaption = document.createElement("caption");
            ecaption.textContent = "Engines";
            enginesTable.appendChild(ecaption);

            const etableHead = document.createElement("thead");
            const etheadTr = document.createElement("tr");

            function ecreateTH(elems) {
                const th = document.createElement("th");
                th.scope = "col";
                th.appendChild(elems);
                etheadTr.appendChild(th);
                return th;
            }

            const etoggleAll = document.createElement("input");
            etoggleAll.type = "checkbox";
            etoggleAll.checked = true;
            etoggleAll.title = "Toggle All Engines";
            etoggleAll.addEventListener("change", e => {
                const checked = e.target.checked;
                const checkboxes = etableBody.querySelectorAll("input[type='checkbox']");
                checkboxes.forEach(box => {
                    box.checked = checked;
                    const index = parseInt(box.dataset.index);
                    if (checked) {
                        toSaveEngines[index] = resultObj.searchEngines[index];
                    } else {
                        delete toSaveEngines[index];
                    }
                });
                console.log(toSaveEngines);
            });
            ecreateTH(etoggleAll);
            ecreateTH(document.createTextNode("Symbol"));
            ecreateTH(document.createTextNode("URL"));

            etableHead.appendChild(etheadTr);
            enginesTable.appendChild(etableHead);

            const etableBody = document.createElement("tbody");

            resultObj.searchEngines.forEach((engine, index) => {
                const tr = document.createElement("tr");
                const toggleEngine = document.createElement("input");
                toggleEngine.type = "checkbox";
                toggleEngine.checked = true;
                toggleEngine.dataset.index = index;
                toggleEngine.title = `Toggle ${engine.symbol}`;

                toggleEngine.addEventListener("change", e => {
                    const i = parseInt(e.target.dataset.index);
                    if (e.target.checked) {
                        toSaveEngines[i] = resultObj.searchEngines[i];
                    } else {
                        delete toSaveEngines[i];
                    }
                    console.log(toSaveEngines);
                });

                function ecreateTD(elem) {
                    const td = document.createElement("td");
                    td.appendChild(elem);
                    tr.appendChild(td);
                    return td;
                }

                ecreateTD(toggleEngine);
                ecreateTD(document.createTextNode(engine.symbol));
                ecreateTD(document.createTextNode(engine.url));
                etableBody.appendChild(tr);
            });

            enginesTable.appendChild(etableBody);

            importModal = gbal.ui.modal({
                id:"import1",
                title:"Choose Settings to Import",
                txt: [settingsTable,enginesTable],
                headActions:[
                    {
                        text:"Close",
                        title:"Close Import Wizard",
                        classes:["closebtn"],
                        action: ()=>{importModal.remove()}
                    }
                ],
                mainActions:[
                    {
                        text:"Cancel",
                        title:"Cancel Import",
                        classes:["closebtn"],
                        action: ()=>{importModal.remove()}
                    },
                    {
                        text:"Import",
                        title:"Import these Settings",
                        action: ()=>{finallyImport(toSave)}
                    },
                ]
            });
            document.body.appendChild(importModal);
            function finallyImport(toSave) {
                console.log(toSave);
                Object.keys(toSave).forEach(key=>{
                    if (key !== "searchEngines") {
                        gbal.settings[key] = toSave[key]
                    };
                });
                if (toSaveEngines.length > 0) {
                    const filteredEngines = toSaveEngines.filter(e => e);
                    gbal.settings.searchEngines.push(...filteredEngines);
                    console.log(filteredEngines)
                };
                gbal.save();
                importModal.remove();
                location.reload();
            };
        };
    };

    function exportDialog() {
        const toSave = {...gbal.settings};
        console.log(toSave);
        exportDialogX();
        function exportDialogX() {
            let exportModal;

            const settingsTable = document.createElement("table");
            settingsTable.id = "exportsettings";
            const scaption = document.createElement("caption");
            scaption.textContent = "Settings";
            settingsTable.appendChild(scaption);
            const stableHead = document.createElement("thead");
            const stheadTr = document.createElement("tr");

            function screateTH(elems) {
                const th = document.createElement("th");
                th.scope = "col";
                th.appendChild(elems);
                stheadTr.appendChild(th);
                return th;
            };

            const stoggleAll = document.createElement("input");
            stoggleAll.type = "checkbox";
            stoggleAll.checked = true;
            stoggleAll.title = "Toggle All Settings";
            stoggleAll.addEventListener("change", e => {
                const checked = e.target.checked;
                const checkboxes = stableBody.querySelectorAll("tr td input[type='checkbox']");

                checkboxes.forEach(box => {
                    box.checked = checked;
                    const key = box.dataset.key;
                    if (checked) {
                        toSave[key] = gbal.settings[key];
                    } else {
                        delete toSave[key];
                    }
                });

                console.log(toSave);
            });
            screateTH(stoggleAll);
            screateTH(document.createTextNode("Setting"));
            screateTH(document.createTextNode("Value"));

            stableHead.appendChild(stheadTr);
            settingsTable.appendChild(stableHead);

            const stableBody = document.createElement("tbody");
            Object.keys(gbal.settings).forEach(key=>{
                const dispName = litDefData[key] || `${key} (invalid setting)`;
                let dispVal = gbal.settings[key];
                let checked = !dispName.includes("invalid setting");
                if (typeof dispVal == "string") dispVal = `"${dispVal}"`;
                if (typeof dispVal == "number") dispVal = `${dispVal}`;
                if (typeof dispVal == "boolean") dispVal = `${dispVal}`;
                if (typeof dispVal == "array") dispVal = `[${dispVal}]`;
                if (key == "searchEngines") {
                    return;
                } else {
                    screateRow(key, dispName, dispVal, checked);
                };
            });

            function screateRow(ogKey, name, val, checked) {
                const tr = document.createElement("tr");
                const toggleSetting = document.createElement("input");
                toggleSetting.type = "checkbox";
                toggleSetting.checked = checked ?? true;
                toggleSetting.dataset.key = ogKey;
                toggleSetting.title = `Toggle ${name}`;

                toggleSetting.addEventListener("change", e => {
                    if (e.target.checked) {
                        toSave[ogKey] = gbal.settings[ogKey];
                    } else {
                        delete toSave[ogKey];
                    };
                    if (toSave == gbal.settings) {
                        stoggleAll.checked = true;
                    } else {
                        stoggleAll.checked = false;
                    };
                    console.log(toSave);
                });

                createTD(toggleSetting);
                createTD(document.createTextNode(name));
                if (typeof val == "string") createTD(document.createTextNode(val));
                if (typeof val == "object") createTD(val);

                function createTD(elem) {
                    const td = document.createElement("td");
                    td.appendChild(elem);
                    tr.appendChild(td);
                    return td;
                }

                stableBody.appendChild(tr);
                return toggleSetting;
            };

            settingsTable.appendChild(stableBody);

            // engines below god dman it
            const toSaveEngines = [...gbal.settings.searchEngines];
            delete toSave.searchEngines;

            const enginesTable = document.createElement("table");
            enginesTable.id = "importengines";
            const ecaption = document.createElement("caption");
            ecaption.textContent = "Engines";
            enginesTable.appendChild(ecaption);

            const etableHead = document.createElement("thead");
            const etheadTr = document.createElement("tr");

            function ecreateTH(elems) {
                const th = document.createElement("th");
                th.scope = "col";
                th.appendChild(elems);
                etheadTr.appendChild(th);
                return th;
            }

            const etoggleAll = document.createElement("input");
            etoggleAll.type = "checkbox";
            etoggleAll.checked = true;
            etoggleAll.title = "Toggle All Engines";
            etoggleAll.addEventListener("change", e => {
                const checked = e.target.checked;
                const checkboxes = etableBody.querySelectorAll("input[type='checkbox']");
                checkboxes.forEach(box => {
                    box.checked = checked;
                    const index = parseInt(box.dataset.index);
                    if (checked) {
                        toSaveEngines[index] = gbal.settings.searchEngines[index];
                    } else {
                        delete toSaveEngines[index];
                    }
                });
                console.log(toSaveEngines);
            });
            ecreateTH(etoggleAll);
            ecreateTH(document.createTextNode("Symbol"));
            ecreateTH(document.createTextNode("URL"));

            etableHead.appendChild(etheadTr);
            enginesTable.appendChild(etableHead);

            const etableBody = document.createElement("tbody");

            gbal.settings.searchEngines.forEach((engine, index) => {
                const tr = document.createElement("tr");
                const toggleEngine = document.createElement("input");
                toggleEngine.type = "checkbox";
                toggleEngine.checked = true;
                toggleEngine.dataset.index = index;
                toggleEngine.title = `Toggle ${engine.symbol}`;

                toggleEngine.addEventListener("change", e => {
                    const i = parseInt(e.target.dataset.index);
                    if (e.target.checked) {
                        toSaveEngines[i] = gbal.settings.searchEngines[i];
                    } else {
                        delete toSaveEngines[i];
                    }
                    console.log(toSaveEngines);
                });

                function ecreateTD(elem) {
                    const td = document.createElement("td");
                    td.appendChild(elem);
                    tr.appendChild(td);
                    return td;
                }

                ecreateTD(toggleEngine);
                ecreateTD(document.createTextNode(engine.symbol));
                ecreateTD(document.createTextNode(engine.url));
                etableBody.appendChild(tr);
            });

            enginesTable.appendChild(etableBody);

            exportModal = gbal.ui.modal({
                id:"export1",
                title:"Choose Settings to Export",
                txt: [settingsTable, enginesTable],
                headActions:[
                    {
                        text:"Close",
                        title:"Close Export Wizard",
                        classes:["closebtn"],
                        action: ()=>{exportModal.remove()}
                    }
                ],
                mainActions:[
                    {
                        text:"Cancel",
                        title:"Cancel Export",
                        classes:["closebtn"],
                        action: ()=>{exportModal.remove()}
                    },
                    {
                        text:"Export",
                        title:"Export these Settings as JSON file",
                        action: ()=>{finallyExport("myEngines.spp.json")}
                    },
                ]
            });
            document.body.appendChild(exportModal);
            function finallyExport(filename) {
                if (toSaveEngines.length > 0) {
                    toSave.searchEngines = [];
                    const filteredEngines = toSaveEngines.filter(e => e);
                    if (filteredEngines.length > 0) {
                        toSave.searchEngines.push(...filteredEngines);
                    } else {
                        delete toSave.searchEngines;
                    }
                    console.log(filteredEngines)
                };
                var blob = new Blob([JSON.stringify(toSave)], { type: 'application/json' });
                var url = URL.createObjectURL(blob);

                var a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                console.log(toSave)
                // exportModal.remove();
            };
        };
    };

    function urlImport() {
        const url = params.get("importExternal");
        if (!confirm(`Do you want to import engines from "${url}"?`)) return;

        fetch(url)
            .then(response => response.json())
            .then(json => {
                try {
                    gbal.settings.searchEngines.push(...json.searchEngines);
                    loadEngines({moved: gbal.settings.searchEngines.length-1});
                    const engineList = document.querySelector("#enginelist");
                    engineList.scrollTo({ top: engineList.scrollHeight, behavior: "smooth" });
                    gbal.save();
                } catch (error) {
                    alert("This is not valid JSON.");
                    console.error(error);
                };
                history.replaceState(1, null, window.location.href.replace(/\??&?import=\w*\.json/g, ''));
            })
            .catch(error => {
                console.error(error);
                alert("Failed to fetch engine list");
            });
    };
    if (params.get("importExternal")) {
        document.addEventListener("DOMContentLoaded", ()=>{
            urlImport();
        });
    };

    document.querySelector(".skipnav").addEventListener("click",(e)=>{
        document.querySelector("#enginelist").focus();
    });
    document.addEventListener("keydown",(e)=>{
        if (e.key == "N" && e.ctrlKey) {
            e.preventDefault();
            addNew();
        };
    });

    if (location.hostname == "127.0.0.1") {
        document.querySelector("figure>img").style.cssText = "filter:sepia(1) saturate(100);";
    };
    document.body.dataset.darktheme = gbal.settings.darkTheme;
    </script>
</body>
</html>